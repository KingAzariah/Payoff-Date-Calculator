<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Legal Days Calculator</title>

<style>
:root{
  --navy: #0B2D42;
  --gold: #C6A663;
  --gold-light: #D8B97A;
  --white: #FFFFFF;
  --gray-light: #E6E6E6;
}

*{ box-sizing:border-box; }

body{
  margin:0;
  font-family: "Segoe UI", Arial, sans-serif;
  background: var(--navy);
  color: var(--white);
  min-height:100vh;
}

.container{
  max-width:900px;
  margin:auto;
  padding:80px 20px;
}

.header{
  margin-bottom:60px;
}

.header h1{
  font-size:46px;
  font-weight:300;
  margin:0;
  line-height:1.2;
}

.card{
  background: rgba(255,255,255,0.05);
  border:1px solid rgba(255,255,255,0.1);
  border-radius:12px;
  padding:30px;
  max-width:650px;
  backdrop-filter: blur(6px);
}

label{
  font-size:14px;
  display:block;
  margin-bottom:6px;
  color:var(--gray-light);
}

input[type="text"].date-input{
  width:100%;
  padding:18px;
  border-radius:10px;
  border:none;
  font-size:20px;
  margin-bottom:10px;
  letter-spacing:.5px;
}

.hint{
  font-size:12.5px;
  margin-bottom:20px;
  color:var(--gray-light);
}

.button{
  background: var(--gold);
  color:#1A1A1A;
  padding:14px 28px;
  border:none;
  border-radius:8px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  transition:0.3s ease;
}

.button:hover{ background: var(--gold-light); }

.result{
  margin-top:30px;
  font-size:42px;
  font-weight:600;
  color:var(--gold);
}

.small{
  font-size:14px;
  margin-top:10px;
  color:var(--gray-light);
}

@media (max-width:768px){
  .header h1{ font-size:34px; }
  input[type="text"].date-input{ font-size:18px; padding:16px; }
}
</style>
</head>

<body>

<div class="container">

  <div class="header">
    <h1>
      Calculate Legal Days<br>
      Between Payment & Payoff
    </h1>
  </div>

  <div class="card">

    <label for="startDate">Most Recent Payment Date</label>
    <input
      type="text"
      id="startDate"
      class="date-input"
      inputmode="numeric"
      autocomplete="off"
      placeholder="MM/DD/YYYY"
      maxlength="10"
    />
    <div class="hint">Type 8 digits (MMDDYYYY). Slashes add automatically.</div>

    <label for="endDate">Payoff Date</label>
    <input
      type="text"
      id="endDate"
      class="date-input"
      inputmode="numeric"
      autocomplete="off"
      placeholder="MM/DD/YYYY"
      maxlength="10"
    />
    <div class="hint">Defaults to today.</div>

    <button class="button" type="button" onclick="calculate()">CALCULATE DAYS</button>

    <div class="result" id="result">â€”</div>
    <div class="small" id="details"></div>

  </div>

</div>

<script>

/* ---------- INPUT MASK (MM/DD/YYYY) ---------- */
function digitsOnly(s){
  return (s || "").replace(/\D/g, "");
}

function formatMMDDYYYY(digits){
  const mm = digits.slice(0,2);
  const dd = digits.slice(2,4);
  const yyyy = digits.slice(4,8);

  let out = "";
  if(mm) out += mm;
  if(dd) out += "/" + dd;
  if(yyyy) out += "/" + yyyy;
  return out;
}

function attachMask(el){
  el.addEventListener("input", () => {
    const digits = digitsOnly(el.value).slice(0,8);
    el.value = formatMMDDYYYY(digits);
  });
}

/* ---------- DATE UTILITIES ---------- */
function parseMMDDYYYY(str){
  const parts = str.split("/");
  if(parts.length !== 3) return null;

  const mm = Number(parts[0]);
  const dd = Number(parts[1]);
  const yyyy = Number(parts[2]);

  const d = new Date(yyyy, mm-1, dd);

  if(d.getFullYear() !== yyyy ||
     d.getMonth() !== mm-1 ||
     d.getDate() !== dd){
    return null;
  }

  return d;
}

function formatDate(date){
  return date.toLocaleDateString();
}

function addDays(date, days){
  const d = new Date(date);
  d.setDate(d.getDate() + days);
  return d;
}

/* ---------- DEFAULT PAYOFF DATE = TODAY ---------- */
window.addEventListener("DOMContentLoaded", () => {
  const startEl = document.getElementById("startDate");
  const endEl = document.getElementById("endDate");

  attachMask(startEl);
  attachMask(endEl);

  const today = new Date();
  const mm = String(today.getMonth()+1).padStart(2,"0");
  const dd = String(today.getDate()).padStart(2,"0");
  const yyyy = today.getFullYear();

  endEl.value = `${mm}/${dd}/${yyyy}`;
});

/* ---------- CALCULATION (Calendar Days Included) ---------- */
function calculate(){
  const startStr = document.getElementById("startDate").value;
  const endStr = document.getElementById("endDate").value;

  const paymentDate = parseMMDDYYYY(startStr);
  const payoffDate = parseMMDDYYYY(endStr);

  if(!paymentDate || !payoffDate){
    alert("Please enter valid dates in MM/DD/YYYY format.");
    return;
  }

  if(payoffDate < paymentDate){
    alert("Payoff date must be on or after the payment date.");
    return;
  }

  // Exclude payment date, include payoff date
  const start = addDays(paymentDate, 1);
  const end = payoffDate;

  const msPerDay = 24*60*60*1000;
  const diff = Math.floor((end - start)/msPerDay) + 1;

  document.getElementById("result").textContent = diff + " Days";
  document.getElementById("details").textContent =
    "Counting calendar days from " +
    formatDate(paymentDate) +
    " to " +
    formatDate(payoffDate) +
    " (weekends included).";
}

</script>

</body>
</html>
